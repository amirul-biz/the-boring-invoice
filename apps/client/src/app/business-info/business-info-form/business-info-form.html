<form [formGroup]="form">
  <div class="card mb-3">
    <div class="card-header">
      <h5 class="mb-0">Business Information</h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-12 col-md-6">
          <label for="businessName" class="form-label">Business Name</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.businessName)}"
            id="businessName"
            formControlName="businessName">
          <div class="invalid-feedback">Business name is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="businessEmail" class="form-label">Business Email</label>
          <input
            type="email"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.businessEmail)}"
            id="businessEmail"
            formControlName="businessEmail">
          <div class="invalid-feedback">Valid email is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="taxIdentificationNumber" class="form-label">Tax Identification Number (TIN)</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.taxIdentificationNumber)}"
            id="taxIdentificationNumber"
            formControlName="taxIdentificationNumber">
          <div class="invalid-feedback">TIN is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="businessRegistrationNumber" class="form-label">Business Registration Number</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.businessRegistrationNumber)}"
            id="businessRegistrationNumber"
            formControlName="businessRegistrationNumber">
          <div class="invalid-feedback">Registration number is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="msicCode" class="form-label">MSIC Code</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.msicCode)}"
            id="msicCode"
            formControlName="msicCode">
          <div class="invalid-feedback">Valid 5-digit MSIC code is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="categoryCode" class="form-label">Category Code</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.categoryCode)}"
            id="categoryCode"
            formControlName="categoryCode">
          <div class="invalid-feedback">Category code is required</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="userSecretKey" class="form-label">User Secret Key</label>
          <div class="input-group" [ngClass]="{'is-invalid': isFieldInvalid(form.controls.userSecretKey)}">
            <input
              [type]="showSecretKey ? 'text' : 'password'"
              class="form-control"
              [ngClass]="{'is-invalid': isFieldInvalid(form.controls.userSecretKey)}"
              id="userSecretKey"
              formControlName="userSecretKey">
            <button
              type="button"
              class="btn btn-outline-secondary"
              (click)="toggleSecretKey()"
              [attr.aria-label]="showSecretKey ? 'Hide secret key' : 'Show secret key'">
              {{ showSecretKey ? 'Hide' : 'Show' }}
            </button>
          </div>
          <div class="invalid-feedback">User secret key is required</div>
        </div>

        <div class="col-12">
          <label for="businessActivityDescription" class="form-label">Business Activity Description</label>
          <textarea
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.businessActivityDescription)}"
            id="businessActivityDescription"
            formControlName="businessActivityDescription"
            rows="2"></textarea>
          <div class="invalid-feedback">Business activity description is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="idType" class="form-label">ID Type</label>
          <select
            class="form-select"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.idType)}"
            id="idType"
            formControlName="idType">
            <option value="">Select ID Type</option>
            <option value="BRN">BRN (Business Registration No.)</option>
            <option value="NRIC">NRIC (MyKad)</option>
            <option value="PASSPORT">Passport</option>
            <option value="ARMY">Army ID</option>
          </select>
          <div class="invalid-feedback">ID type is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="sstRegistrationNumber" class="form-label">SST Registration Number <span class="text-muted">(optional)</span></label>
          <input
            type="text"
            class="form-control"
            id="sstRegistrationNumber"
            formControlName="sstRegistrationNumber"
            placeholder="e.g. W10-1234-12345678">
        </div>

        <div class="col-12">
          <label for="addressLine1" class="form-label">Business Address</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.addressLine1)}"
            id="addressLine1"
            formControlName="addressLine1"
            placeholder="Street address">
          <div class="invalid-feedback">Address is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="postcode" class="form-label">Postcode</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.postcode)}"
            id="postcode"
            formControlName="postcode">
          <div class="invalid-feedback">Postcode is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="city" class="form-label">City</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.city)}"
            id="city"
            formControlName="city">
          <div class="invalid-feedback">City is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="state" class="form-label">State</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.state)}"
            id="state"
            formControlName="state"
            placeholder="e.g. 14">
          <div class="invalid-feedback">State is required</div>
        </div>

        <div class="col-12 col-md-4">
          <label for="invoiceVersion" class="form-label">Invoice Version</label>
          <input
            type="text"
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid(form.controls.invoiceVersion)}"
            id="invoiceVersion"
            formControlName="invoiceVersion"
            placeholder="e.g. 1.0">
          <div class="invalid-feedback">Invoice version is required</div>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-end">
    <button type="submit" class="btn btn-success btn-lg" (click)="onSubmit()">
      {{ mode === 'edit' ? 'Update Business Info' : 'Create Business Info' }}
    </button>
  </div>
</form>
